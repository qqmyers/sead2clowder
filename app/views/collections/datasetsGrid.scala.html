@(datasetsList: List[Dataset], parentCollectionId: String)(implicit user: Option[models.User])

@import api.Permission

@util.masonry()

<p>
    Most recent datasets:
    <span class="pull-right">
        @if(user.isDefined &&  Permission.checkPermission(Permission.EditCollection, ResourceRef(ResourceRef.collection, UUID(parentCollectionId)))) {
            <a id ="create-dataset" href="@routes.Datasets.newDataset(Some(parentCollectionId))" class="btn btn-link btn-xs">
                <span class="glyphicon glyphicon-ok"></span> Create Dataset
            </a>
        }
        <a href="@(routes.Datasets.listByCollection(parentCollectionId,"","",12))" class="btn btn-link btn-xs">
            <span class="glyphicon glyphicon-hand-right"></span> All Datasets
        </a>
    </span>

</p>

<div class="row" id="tile-view">
    <div class="col-md-12">
        <div id="masonry">
        @datasetsList.map { dataset =>
          @datasets.tile(dataset, Some(parentCollectionId), Map.empty[UUID, Int], "col-lg-4 col-md-4 col-sm-4", false, true)

        }
        </div>
    </div>
</div>

@if(!user.isDefined) {
    <script type="text/javascript">
        $('#create-dataset').addClass('disabled');
    </script>
}
